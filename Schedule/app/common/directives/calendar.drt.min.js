"use strict";angular.module("sch.directives").directive("calendar",["moment","schData",function(n){return{restrict:"AE",scope:{name:"@"},link:function(t,i){var r=React.createClass({displayName:"Calendar",getInitialState:function(){return{month:new Date}},previous:function(){var n=this.state.month;n.add(-1,"M");this.setState({month:n})},next:function(){var n=this.state.month;n.add(1,"M");this.setState({month:n})},select:function(n){this.props.selected=n.date;this.forceUpdate()},render:function(){return'<div><div class="header"><i class="fa fa-angle-left" onClick='+this.previous+"><\/i>"+this.renderMonthLabel()+'<i class="fa fa-angle-right" onClick='+this.next+"><\/i><\/div><DayNames />"+this.renderWeeks()+"<\/div>"},renderWeeks:function(){var i=new Date(this.state.month),r=i.getDay()-i.getDate()%7;r<0&&(r+=7);for(var u=[],f=!1,t=n(this.state.month).add(1-r-i.getDate(),"day"),e=t.month(),o=0;!f;)u.push(React.createElement("Week",{key:t.toString(),date:t.clone(),month:this.state.month,select:this.select,selected:this.props.selected})),t.add(1,"w"),f=o++>2&&e!==t.month(),e=t.month();return u},renderMonthLabel:function(){return"<span>"+this.state.month.format("MMMM, YYYY")+"<\/span>"}}),l=React.createClass({displayName:"DayNames",render:function(){return'<div className="week names"><span class="day">Sun<\/span><span class="day">Mon<\/span><span class="day">Tue<\/span><span class="day">Wed<\/span><span class="day">Thu<\/span><span class="day">Fri<\/span><span class="day">Sat<\/span><\/div>'}}),a=React.createClass({displayName:"Week",render:function(){for(var i,r=[],t=this.props.date,f=n(this.props.month),u=0;u<7;u++)i={name:t.format("dd").substring(0,1),number:t.date(),isCurrentMonth:t.month()===f.month(),isToday:t.isSame(new Date,"day"),date:t},ddays.push(React.createElement("span",{key:i.date.toString(),className:"day"+(i.isToday?" today":"")+(i.isCurrentMonth?"":" different-month")+(i.date.isSame(this.props.selected)?" selected":""),onClick:this.props.select.bind(null,i)},i.number)),t=t.clone(),t.add(1,"d");return React.createElement("div",{className:"week",key:r[0].toString()},r)}});React.render(React.createElement(React.createFactory(r)),i[0])}}}]);